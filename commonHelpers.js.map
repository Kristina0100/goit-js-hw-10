{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst startBtn = document.querySelector('button[data-start]');\nconst daysValue = document.querySelector('span[data-days]');\nconst hoursValue = document.querySelector('span[data-hours]');\nconst minutesValue = document.querySelector('span[data-minutes]');\nconst secondsValue = document.querySelector('span[data-seconds]');\nconst input = document.querySelector('#datetime-picker');\n\n// ВАРІАБЛЕС\n\nlet userSelectedDate;\nlet isActive = false;\nlet intervalId = null;\nstartBtn.disabled = true;\n\n// ОПЦІЇ ТА ВАЛІДАЦІЯ ВИБОРУ ДАТИ\n\nconst showIziToast = () => {\n  iziToast.show({\n    message: 'Please choose a date in the future',\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    backgroundColor: '#EF4040',\n    iconUrl: './img/x-octagon-error.svg',\n    maxWidth: '302px',\n    closeOnClick: true,\n    position: 'topRight',\n    progressBarColor: '#B51B1B',\n  });\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    const selectedDate = selectedDates[0];\n    const currentDate = new Date();\n\n    if (selectedDate <= currentDate) {\n      showIziToast();\n      startBtn.disabled = true;\n    } else {\n      startBtn.disabled = false;\n    };\n    userSelectedDate = selectedDate;\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\n// ПОЧАТОК ВІДЛІКУ ПРИ НАТИСКАННІ \n\nconst onBtnClick = () => {\n  if (isActive) {\n    return;\n  }\n  const startTime = new Date(userSelectedDate).getTime();\n  isActive = true;\n\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const deltaTime = startTime - currentTime;\n\n    if (deltaTime <= 0) {\n      stopTimer();\n    } else {\n      const time = convertMs(deltaTime);\n      updateTimer(time);\n      startBtn.disabled = true;\n      input.disabled = true;\n    }\n  }, 1000);\n};\n\n// ФУНКЦІЯ ДЛЯ ЗУПИНКИ ТА ОЧИСТКИ \n  \nconst stopTimer = () => {\n  clearInterval(intervalId);\n  isActive = false;\n  input.disabled = false;\n  const time = convertMs(0);\n  updateTimer(time);\n};\n\n// КОНВЕРТАЦІЯ\n\nfunction convertMs(ms) {\n\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n};\n\n// ДОДАЄМО НУЛІ ЗА ДОПОМОГОЮ ПАД\n\nconst addLeadingZero = value => String(value).padStart(2, '0');\n\n// ВІДМАЛЮВАННЯ ТАЙМЕРУ\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  daysValue.textContent = `${addLeadingZero(days)}`;\n  hoursValue.textContent = `${addLeadingZero(hours)}`;\n  minutesValue.textContent = `${addLeadingZero(minutes)}`;\n  secondsValue.textContent = `${addLeadingZero(seconds)}`;\n};\n\nstartBtn.addEventListener('click', onBtnClick);\n\n\n"],"names":["startBtn","daysValue","hoursValue","minutesValue","secondsValue","input","userSelectedDate","isActive","intervalId","showIziToast","iziToast","options","selectedDates","selectedDate","flatpickr","onBtnClick","startTime","currentTime","deltaTime","stopTimer","time","convertMs","updateTimer","ms","days","hours","minutes","seconds","addLeadingZero","value"],"mappings":"2GAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAQ,SAAS,cAAc,kBAAkB,EAIvD,IAAIC,EACAC,EAAW,GACXC,EAAa,KACjBR,EAAS,SAAW,GAIpB,MAAMS,EAAe,IAAM,CACzBC,EAAS,KAAK,CACZ,QAAS,qCACT,aAAc,OACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,QAAS,4BACT,SAAU,QACV,aAAc,GACd,SAAU,WACV,iBAAkB,SACtB,CAAG,CACH,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5B,MAAMC,EAAeD,EAAc,CAAC,EAGhCC,GAFgB,IAAI,MAGtBJ,IACAT,EAAS,SAAW,IAEpBA,EAAS,SAAW,GAEtBM,EAAmBO,CACpB,CACH,EAEAC,EAAU,mBAAoBH,CAAO,EAIrC,MAAMI,EAAa,IAAM,CACvB,GAAIR,EACF,OAEF,MAAMS,EAAY,IAAI,KAAKV,CAAgB,EAAE,QAAO,EACpDC,EAAW,GAEXC,EAAa,YAAY,IAAM,CAC7B,MAAMS,EAAc,KAAK,MACnBC,EAAYF,EAAYC,EAE9B,GAAIC,GAAa,EACfC,QACK,CACL,MAAMC,EAAOC,EAAUH,CAAS,EAChCI,EAAYF,CAAI,EAChBpB,EAAS,SAAW,GACpBK,EAAM,SAAW,EAClB,CACF,EAAE,GAAI,CACT,EAIMc,EAAY,IAAM,CACtB,cAAcX,CAAU,EACxBD,EAAW,GACXF,EAAM,SAAW,GACjB,MAAMe,EAAOC,EAAU,CAAC,EACxBC,EAAYF,CAAI,CAClB,EAIA,SAASC,EAAUE,EAAI,CAOrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAIA,MAAMC,EAAiBC,GAAS,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAG7D,SAASP,EAAY,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtD1B,EAAU,YAAc,GAAG2B,EAAeJ,CAAI,CAAC,GAC/CtB,EAAW,YAAc,GAAG0B,EAAeH,CAAK,CAAC,GACjDtB,EAAa,YAAc,GAAGyB,EAAeF,CAAO,CAAC,GACrDtB,EAAa,YAAc,GAAGwB,EAAeD,CAAO,CAAC,EACvD,CAEA3B,EAAS,iBAAiB,QAASe,CAAU"}